<!DOCTYPE html>
<html>
<head>
    <title>Jenkins + Java 8 + Maven Setup (Amazon Linux)</title>
    <style>
        body {
            background-color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        h2 {
            color: #2c3e50;
        }
        pre {
            background: #f4f4f4;
            padding: 14px;
            border-radius: 6px;
            border: 1px solid #ccc;
            overflow-x: auto;
        }
        code {
            font-size: 14px;
        }
    </style>
</head>
<body>

<h2>âœ” Part 1 â€” Install Java 1.8.0 (Java 8) on Amazon Linux</h2>

<pre><code>
sudo yum install java-1.8.0-openjdk java-1.8.0-openjdk-devel -y
</code></pre>

<h2>âœ” Set Java 8 as Default</h2>

<pre><code>
sudo alternatives --config java
sudo alternatives --config javac
</code></pre>

<h2>âœ” Set JAVA_HOME Permanently</h2>

<pre><code>
sudo nano /etc/profile.d/java8.sh
</code></pre>

<h3>Add inside file:</h3>

<pre><code>
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk
export PATH=$JAVA_HOME/bin:$PATH
</code></pre>

<h3>Apply changes:</h3>

<pre><code>
source /etc/profile.d/java8.sh
</code></pre>

<h2>âœ” Verify Java Version</h2>

<pre><code>
java -version
</code></pre>

<hr>

<h2>âœ” Part 2 â€” Install Maven (Amazon Linux)</h2>

<pre><code>
sudo yum install maven -y
</code></pre>

<h2>âœ” Verify Maven</h2>

<pre><code>
mvn -version
</code></pre>

<hr>

<h2>âœ” Part 3 â€” Install Jenkins on Amazon Linux</h2>

<h3>Step 1 â€” Add Jenkins Repo</h3>

<pre><code>
sudo wget -O /etc/yum.repos.d/jenkins.repo \
https://pkg.jenkins.io/redhat-stable/jenkins.repo

sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
</code></pre>

<h3>Step 2 â€” Install Jenkins</h3>

<pre><code>
sudo yum install jenkins -y
</code></pre>

<h3>Step 3 â€” Start and Enable Jenkins</h3>

<pre><code>
sudo systemctl start jenkins
sudo systemctl enable jenkins
sudo systemctl status jenkins
</code></pre>

<hr>

<h2>âœ” Part 4 â€” Open Jenkins Port (8080)</h2>

<pre><code>
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --reload
</code></pre>

<hr>

<h2>âœ” Part 5 â€” Get Jenkins Initial Admin Password</h2>

<pre><code>
sudo cat /var/lib/jenkins/secrets/initialAdminPassword
</code></pre>

<hr>

<h2>ðŸŽ‰ Jenkins is now ready!</h2>

<p>Open in browser:</p>

<pre><code>
http://your-ec2-public-ip:8080
</code></pre>
 <h1>How to Increase Free Temp Space in Jenkins</h1>

    <p>Jenkins uses <code>/tmp</code> for temporary files. If the Free Temp Space is too low, the Built-In Node may stay offline. Follow these steps to increase it:</p>

    <h2>Step 1: Check Current Temp Space</h2>
    <pre>
df -h | grep /tmp
    </pre>
    <p>This shows how much space is currently available in <code>/tmp</code>. If it is low (e.g., 481MB), Jenkins may mark the node offline.</p>

    <h2>Step 2: Increase /tmp Temporarily</h2>
    <p>To increase <code>/tmp</code> until the next reboot, run:</p>
    <pre>
sudo mount -o remount,size=4G /tmp
df -h | grep /tmp
    </pre>
    <p>This temporarily increases /tmp to 4GB.</p>

    <h2>Step 3: Increase /tmp Permanently</h2>
    <ol>
        <li>Edit <code>/etc/fstab</code>:</li>
        <pre>
sudo nano /etc/fstab
        </pre>
        <li>Add the following line at the end of the file:</li>
        <pre>
tmpfs /tmp tmpfs defaults,noatime,size=4G 0 0
        </pre>
        <li>Remount /tmp to apply changes:</li>
        <pre>
sudo mount -o remount /tmp
        </pre>
        <li>Verify the new size:</li>
        <pre>
df -h | grep /tmp
        </pre>
    </ol>

    <h2>Step 4: Restart Jenkins</h2>
    <pre>
sudo systemctl restart jenkins
    </pre>

    <h2>Step 5: Bring Built-In Node Online</h2>
    <p>Go to Jenkins UI â†’ <strong>Manage Jenkins â†’ Nodes â†’ Built-In Node</strong> â†’ Click <strong>Bring this node back online</strong>. The node should now stay online and builds will execute normally.</p>

    <h2>Recommendation</h2>
    <p>Since your root partition has plenty of space, you can safely move Jenkins temp folder to a directory on root instead of using tmpfs if you want a permanent solution without using memory.</p>
</body>
</html>
