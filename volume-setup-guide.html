<!DOCTYPE html>
<html>
<head>
<title>AWS EC2 Volume Partition & Mount Guide</title>
<meta charset="UTF-8">

<!-- Full-screen styling applied (content not modified) -->
<style>
    body {
        font-family: "Segoe UI", Arial, sans-serif;
        line-height: 1.7;
        padding: 30px;
        background: #fafafa;
        color: #222;
        width: 100%;
        margin: 0;
    }

    h1, h2, h3 {
        font-weight: 600;
        margin-top: 30px;
        color: #0a3d62;
    }

    h1 {
        margin-bottom: 20px;
        font-size: 32px;
        text-align: left;
    }

    pre {
        background: #f0f0f0;
        padding: 16px;
        border-left: 5px solid #0a3d62;
        border-radius: 6px;
        font-size: 15px;
        overflow-x: auto;
        white-space: pre-wrap;
    }

    code {
        background: #f0f0f0;
        padding: 3px 6px;
        border-radius: 4px;
        font-size: 15px;
    }

    ul {
        background: #f0f0f0;
        padding: 12px 18px;
        border-radius: 6px;
        border-left: 5px solid #0a3d62;
        list-style: square;
    }

    p {
        margin: 12px 0;
        font-size: 16px;
    }

    div {
        background: #ffffff;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #ddd;
        margin-top: 25px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        width: 100%;
    }
</style>
</head>
<body>

<h1>EC2 Ubuntu â€” Volume Partition, Format & Mount Guide</h1>

<h2>1. Create Partition on /dev/xvdf</h2>
<pre>
sudo fdisk /dev/xvdf

Command (m for help): n
p
1
&lt;enter&gt;
&lt;enter&gt;
w
</pre>

<h2>2. Format & Mount /dev/xvdf1</h2>
<pre>
sudo mkfs.ext4 /dev/xvdf1
sudo mkdir /mnt/vol1
sudo mount /dev/xvdf1 /mnt/vol1
</pre>

<h2>3. Check Mounted Volumes</h2>
<pre>
df -h
</pre>

<div>

<h3>âœ… PART 1 â€” How to UNMOUNT & DETACH VOLUME (OLD INSTANCE)</h3>

<p><strong>1ï¸âƒ£ Unmount the volume</strong></p>
<p>If your volume is mounted at <code>/mnt/vol1</code>:</p>

<pre>sudo umount /mnt/vol1</pre>

<p><strong>2ï¸âƒ£ Confirm unmount</strong></p>
<pre>df -h</pre>

<p>The volume should NOT appear in the output.</p>

<p><strong>3ï¸âƒ£ Detach from EC2</strong></p>
<p>Go to <strong>AWS Console â†’ EC2 â†’ Volumes â†’ Select Volume â†’ Actions â†’ Detach Volume</strong></p>

<p>Wait until the state becomes <strong>available</strong>.</p>

</div>

<h2>âœ”ï¸ STEP 1 â€” Attach the Volume to the New EC2 Instance (RedHat)</h2>
<p>In <strong>AWS Console â†’ EC2 â†’ Volumes</strong>:</p>
<ul>
  <li>Select your volume</li>
  <li>Click <strong>Actions â†’ Attach volume</strong></li>
  <li>Choose the new EC2 instance</li>
  <li>Set device name: <code>/dev/sdf</code></li>
</ul>

<p>Linux will detect it as:</p>
<pre>/dev/xvdf</pre>

<h2>âœ”ï¸ STEP 2 â€” Check Attached Disks</h2>
<p>Run this on the new EC2 instance:</p>
<pre>lsblk</pre>

<p>You should see output similar to:</p>
<pre>
xvdf    202:80   0   10G  0 disk
â””â”€xvdf1 202:81   0   10G  0 part
</pre>

<p>Your actual data is inside <strong>xvdf1</strong> (not xvdf).</p>

<h2>âœ”ï¸ STEP 3 â€” Create a Mount Point</h2>
<p>Use the same folder:</p>
<pre>sudo mkdir -p /mnt/vol1</pre>

<h2>âœ”ï¸ STEP 4 â€” Mount the Partition (IMPORTANT)</h2>
<p>Mount the partition:</p>
<pre>sudo mount /dev/xvdf1 /mnt/vol1</pre>

<p><strong>âš ï¸ Do NOT mount <code>/dev/xvdf</code></strong> â€” it contains no file system.  
Always use <strong><code>/dev/xvdf1</code></strong> (the partition).</p>

<h2>âœ”ï¸ STEP 5 â€” Check Your Data</h2>
<p>Run:</p>
<pre>ls /mnt/vol1</pre>

<h2>6. Check Mounted Volumes</h2>
<pre>
df -h
</pre>

<p><strong>Now both volumes /mnt/vol1 and /mnt/vol2 are ready for storing data.</strong></p>


<!-- â­ NEW SECTION ADDED BELOW â­ -->
<h2>âœ”ï¸ EBS Volume is Permanently Mounted</h2>

<p>After adding the entry in <code>/etc/fstab</code> and running the commands:</p>

<pre>
sudo systemctl daemon-reload
sudo mount -a
</pre>

<p>Your EBS volume will mount automatically every time the instance starts.  
To verify, reboot the instance:</p>

<pre>sudo reboot</pre>

<p>After reboot, check:</p>

<pre>df -h</pre>

<p><strong>If /mnt/vol1 is listed â†’ Your EBS volume is permanently mounted.</strong></p>
<div>

<h2>FULL COMMANDS â€” Create New EBS Volume With 2 Partitions</h2>

<h3>STEP 1 â€” Attach New EBS Volume to EC2</h3>
<ul>
  <li>Go to AWS Console â†’ EC2 â†’ Volumes</li>
  <li>Create Volume (example: 2 GB)</li>
  <li>Attach to instance as <code>/dev/sdf</code></li>
</ul>

<p>Linux will show it as:</p>
<pre>/dev/xvdp</pre>

<hr>

<h3>STEP 2 â€” Create 2 partitions on /dev/xvdp</h3>
<pre>
sudo fdisk /dev/xvdp

# Inside fdisk:
d            â† (only if old partitions exist)
n
p
1
&lt;enter&gt;
+1G         â† First partition size = 1 GB

n
p
2
&lt;enter&gt;
&lt;enter&gt;     â† Use remaining space for partition 2

w            â† Write changes & exit
</pre>

<hr>

<h3>STEP 3 â€” Verify partitions</h3>
<pre>
lsblk
</pre>

Expected output:
<pre>
xvdp
 â”œâ”€xvdp1   1G
 â””â”€xvdp2   1G
</pre>

<hr>

<h3>STEP 4 â€” Format the partitions (ext4)</h3>
<pre>
sudo mkfs.ext4 /dev/xvdp1
sudo mkfs.ext4 /dev/xvdp2
</pre>

<hr>

<h3>STEP 5 â€” Create mount folders</h3>
<pre>
sudo mkdir -p /mnt/vol2
sudo mkdir -p /mnt/vol3
</pre>

<hr>

<h3>STEP 6 â€” Mount both partitions</h3>
<pre>
sudo mount /dev/xvdp1 /mnt/vol2
sudo mount /dev/xvdp2 /mnt/vol3
</pre>

<hr>

<h3>STEP 7 â€” Check mounts</h3>
<pre>
df -h
lsblk
</pre>

<hr>

<h3>STEP 8 â€” Make permanent using /etc/fstab</h3>
<p>Get UUIDs:</p>
<pre>
sudo blkid /dev/xvdp1
sudo blkid /dev/xvdp2
</pre>

<p>Then edit fstab:</p>
<pre>
sudo vi /etc/fstab
</pre>

<p>Add the following lines (replace YOUR-UUID-1 / YOUR-UUID-2):</p>
<pre>
UUID=YOUR-UUID-1   /mnt/vol2   ext4   defaults,nofail   0  2
UUID=YOUR-UUID-2   /mnt/vol3   ext4   defaults,nofail   0  2
</pre>

<p>Reload systemd and test:</p>
<pre>
sudo systemctl daemon-reload
sudo mount -a
</pre>

<p>If no errors â†’ Reboot:</p>
<pre>
sudo reboot
</pre>

<h3>ğŸ‰ Done â€” Your EBS volume now has 2 partitions mounted permanently.</h3>

</div>

</body>
</html>
